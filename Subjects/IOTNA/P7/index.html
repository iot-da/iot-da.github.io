<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://iot-da.github.io/Subjects/IOTNA/P7/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Final programming project - Internet of Things and Data Analytics</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Internet of Things and Data Analytics</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../General/" class="nav-link">General info.</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../News/" class="nav-link">News</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Subjects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">IOTNA</a>
</li>
                                    
<li>
    <a href="../../MDM/" class="dropdown-item">MDM</a>
</li>
                                    
<li>
    <a href="../../SID/" class="dropdown-item">SID</a>
</li>
                                    
<li>
    <a href="../../IA/" class="dropdown-item">IA</a>
</li>
                                    
<li>
    <a href="../../NP1/" class="dropdown-item">NP1</a>
</li>
                                    
<li>
    <a href="../../NP2/" class="dropdown-item">NP2</a>
</li>
                                    
<li>
    <a href="../../SEC/" class="dropdown-item">SEC</a>
</li>
                                    
<li>
    <a href="../../EDGE/" class="dropdown-item">EDGE</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../../Contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#final-programming-project" class="nav-link">Final programming project</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#project-description" class="nav-link">Project description</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#important-dates" class="nav-link">Important dates</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="final-programming-project">Final programming project</h1>
<p>The final development (programming) project will be finally carried on <strong>in teams of 2 people</strong>.</p>
<h2 id="project-description">Project description</h2>
<p>The project must provide the following features:</p>
<ul>
<li>It must periodically  monitor   two I2C sensors of the ESP32-MeshKit-Sense board,  the temperature sensor (HTS221) and the ambient light sensor (BH1750FVI).  You will read the temperature sensor every 5 seconds and the light sensor every 2 seconds. </li>
<li>The <em>power manager</em> will be configured to enter light sleep whenever possible.</li>
<li>There will be a LOG (level INFO) every 10 seconds informing of the last temperature and ambient light (illuminance, measured in lux) readings</li>
<li>LED IO12 should be blinking every second to inform that the system is running. </li>
<li>If the ambient light sensor lux lecture goes below a certain threshold (decided by you), the LED IO2 will be on and LED IO12 will go off. </li>
<li>If the ambient light sensor readings remain under the threshold for more than 10 minutes, the system will enter deep sleep for 30 minutes.</li>
</ul>
<h3 id="optional-parts">Optional parts</h3>
<p>OPTIONALLY you could include all/some of the  following features:</p>
<ul>
<li>Design the system using the Finite State Machine (FSM) presented in the lectures.</li>
<li>Instead of informing of the last temperature/illuminance reading, log the average of the readings since the last log.</li>
<li>Before entering deep sleep, the system will write the current temperature and luminance reading in Flash, using the NVS partition. After waking up, and only if we are returning from a deep sleep,  there will be a LOG message informing of the stored temperature and illuminance before starting to read the sensors again.</li>
<li>LED IO12 could be controlled using a PWM signal so its intensity changes depending on the current illuminance: if the illuminance is high, the LED IO12 will bright more. When the illuminance is less, the LED IO12 will be dimmer. You can check the <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/mcpwm.html">ESP-IDF documentation and examples for PWM</a> (in the documentation, PWM is used to control motors and servomotors. But the same signal could drive the LED, controlling its intensity).</li>
</ul>
<h2 id="important-dates">Important dates</h2>
<ul>
<li><em>Group notifications</em>. Remember that this assignment has to be done in a team of 2 people, so the <strong>current groups are no longer valid</strong>. Please send an email to Prof. Jose Ignacio him about your team for this project <strong>before 29th Dec 2021</strong></li>
<li>During the week of 10th January 2022, you will be able to work on this project during IOTNA lectures. You will be able to ask your questions to the Professor during those sessions. </li>
<li><em>DEADLINE</em>: 24th January 2022.</li>
</ul>
<h3 id="delivery-instructions">Delivery instructions</h3>
<p>You must send your code (.c and .h files) to Prof. Jose Ignacio by email (jigomez@ucm.es) before the deadline expires.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
